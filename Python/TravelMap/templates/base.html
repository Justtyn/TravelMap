<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>{{ title or 'TravelMap' }}</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}" />
</head>
<body>
  <div class="page">
    <header>
      <div class="logo">TravelMap</div>
      <nav>
        <a href="{{ url_for('home_page') }}" class="{% if active == 'home' %}active{% endif %}">é¦–é¡µ</a>
        <a href="{{ url_for('docs_page') }}" class="{% if active == 'docs' %}active{% endif %}">æ–‡æ¡£</a>
        <a href="{{ url_for('features_page') }}" class="{% if active == 'features' %}active{% endif %}">åŠŸèƒ½ä»‹ç»</a>
        <a href="{{ github_url }}" target="_blank" rel="noopener">GitHub</a>
      </nav>
      <button id="themeToggle" class="btn btn-ghost" type="button" aria-label="åˆ‡æ¢ä¸»é¢˜">ğŸŒ™</button>
    </header>

    {% block content %}{% endblock %}

    <footer>
      Â© 2025 TravelMap Â· ç”± Flask + SQLite é©±åŠ¨
    </footer>
  </div>
  <script>
    (function() {
      const body = document.body;
      const toggleBtn = document.getElementById('themeToggle');
      const storageKey = 'travelmap-theme';

      function setTheme(mode) {
        if (mode === 'light') {
          body.classList.add('theme-light');
          toggleBtn.textContent = 'â˜€ï¸';
        } else {
          body.classList.remove('theme-light');
          toggleBtn.textContent = 'ğŸŒ™';
        }
      }

      const saved = localStorage.getItem(storageKey);
      if (saved) {
        setTheme(saved);
      } else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: light)').matches) {
        setTheme('light');
      }

      toggleBtn.addEventListener('click', () => {
        const isLight = body.classList.toggle('theme-light');
        setTheme(isLight ? 'light' : 'dark');
        localStorage.setItem(storageKey, isLight ? 'light' : 'dark');
      });
    })();
  </script>
</body>
</html>
